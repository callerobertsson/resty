# RESTY

_A command line interface on Linux and Windows for running and managing requests in a
.http-file._

![Screenshot](cli.png)


## How it works

Run `resty` with a .http-file as argument.

```
$ resty test_rest.http
```

Resty will display the endpoints and let the user navigate and run them
using the `curl` command that has to be installed. 

The .http-file can be edited by pressing `e` as long as you have set
`Editor` in the config file.


## Help (`resty -h`)

```
RESTY
    SYNOPSIS
          resty [options] [<.http-file>|<directory>]

    DESCRIPTON
          By default, resty will open in directory mod and list all .http-file in current directory
          and below. The user can then select which one to open.

          If there is an argument on the command line, resty will check if it is a directory and
          open it in directory mode. If the argument is a file, resty will open it in file mode.

          Resty opens <.http-file> and displays list of the requests. The list can be navigated
          using vim-like bindings or arrow keys.

          Requests can be run by pressing '<enter>' and the .http-file edited by pressing 'e'.

          A default config file can be printed by using the '-g' flag. Modify it and put it in
                  $HOME/.resty.json.

          For more info press '?' to show the available commands.

    OPTIONS
        -c   config file (default: "")
        -e   env file (default: "")
        -g   print default config file (default: "false")
        -v   version information (default: "false")
```


## CLI Commands (`?`)
```
Navigation

  Arrow keys or Vim (jk) for navigating endpoint list.

  g - Jump to first request
  G - Jump to last request

Commands

  r - Run currently selected request, <enter>
  R - Run all requests in current .http-file
  v - View variables set for current request
  e - Edit the input file using Editor config setting or $EDITOR environment variable
  c - Show config settings

  ? - Show this help
  q - Quit Resty

After Request has run
  > - save to file
  any other key will continue
```


## Configuration

Default configuration can be generated by running `resty -g`. Like
```
$ resty -g > ~/.resty.json
```

Example config file:
```
{
  "CurlCommand": "curl",
  "Editor": "edlin.exe",
  "ColorMode": true,
  "InsecureSSL": true,
  "Formatters": {
      "*": "cat"
      "application/json": "jq"
  }
}
```

Default values if settings are empty or not present:
- CurlCommand = curl
- Editor = `$EDITOR` (or `%EDITOR%`)
- ColorMode = false
- InsecureSSL = false (if true, the -k flag will be sent to curl)
- Formatters is a map from mime-type to executable program, like `jq`,
  that formats the response data. Note that the accept header must be
  set for the request. A default formatter can be configured by using
  `"*": "<default_formatter>"`.


## Future

Some ideas about possible improvements.

- Fix arrow keys when navigating the requests.
- Maybe replace curl command execution with home made implementation.

/Calle

